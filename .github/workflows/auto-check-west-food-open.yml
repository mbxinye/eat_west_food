name: Check West Food Open
run-name: ${{ github.actor }} is checking out west-food open 🚀
on:
  schedule:
    - cron: "*/5 * * * *"

jobs:
  Check-West-Food-Open:
    runs-on: ubuntu-latest
    steps:
      - name: Check Webpage Content
        run: |
          content=$(curl -s $XCURL | grep "用餐时间")
          if [[ $content =~ (.*)用餐时间 ]]; then
            text=${BASH_REMATCH[1]}
            echo $text
            curl -X POST -H "Content-Type: application/json" -d "{\"appToken\": \"$WXPUSHAPPTOKEN\",\"content\": \"西餐开了\",\"summary\": \"西餐开了！\",\"contentType\": 1,\"topicIds\": [3176],\"url\": \"$XCURL\",\"verifyPay\": false}"   https://wxpusher.zjiecode.com/api/send/message
          else
            echo "No match"
          fi